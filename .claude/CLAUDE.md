# ì£¼ì‹ ê°­ ìƒìŠ¹ ì˜ˆì¸¡ AI ëª¨ë¸ - í”„ë¡œì íŠ¸ ì§€ì¹¨ì„œ

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ê°€ì„¤
> **"ê°­ ìƒìŠ¹ìœ¼ë¡œ ì¶œë°œí•œ ì¢…ëª©ì€ ë‹¹ì¼ ì¥ë§ˆê°ê¹Œì§€ ìƒìŠ¹í•  ê²ƒì´ë‹¤"**

### 1.2 ëª©í‘œ
- ê°­ ìƒìŠ¹ ì¢…ëª©ì˜ ë‹¹ì¼ ì¢…ê°€ ë° ê³ ê°€ ë°©í–¥ ì˜ˆì¸¡ (ìƒìŠ¹/í•˜ë½)
- ê°­ ìƒìŠ¹ ìœ í˜•ë³„ íŒ¨í„´ ë¶„ì„
- ì‹¤ì œ íŠ¸ë ˆì´ë”© ì ìš© ê°€ëŠ¥í•œ ëª¨ë¸ ê°œë°œ

### 1.3 ë²”ìœ„
| í•­ëª© | ë‚´ìš© |
|------|------|
| ëŒ€ìƒ ì‹œì¥ | NYSE, NASDAQ, AMEX |
| ë°ì´í„° ê¸°ê°„ | 20ë…„ (ì•½ 2005 ~ 2024) |
| ë°ì´í„° ì†ŒìŠ¤ | Refinitiv (DB) |
| ê°œë°œ í™˜ê²½ | Python |

---

## 2. ìš©ì–´ ì •ì˜

### 2.1 ê°­ ìƒìŠ¹ (Gap Up)
```
ê°­ ìƒìŠ¹ë¥  = (ë‹¹ì¼ ì‹œê°€ - ì „ì¼ ì¢…ê°€) / ì „ì¼ ì¢…ê°€ Ã— 100

ë°ì´í„° ìˆ˜ì§‘ ì¡°ê±´: ê°­ ìƒìŠ¹ë¥  > 0% (ì‹œê°€ > ì „ì¼ ì¢…ê°€)
ëª¨ë¸ í•™ìŠµ ì‹œ í•„í„°ë§ ê°€ëŠ¥: 1%, 2%, 3% ë“± ì‹¤í—˜
```

### 2.2 íƒ€ê²Ÿ ë¼ë²¨ (ì˜ˆì¸¡ ëŒ€ìƒ)
```
ì„±ê³µ(1): ë‹¹ì¼ ì¢…ê°€ > ë‹¹ì¼ ì‹œê°€
ì‹¤íŒ¨(0): ë‹¹ì¼ ì¢…ê°€ â‰¤ ë‹¹ì¼ ì‹œê°€
```

### 2.3 ê°­ ìœ í˜• ë¶„ë¥˜
| ìœ í˜• | ì •ì˜ | ì‹ë³„ ë°©ë²• |
|------|------|-----------|
| Earnings Gap | ì‹¤ì  ë°œí‘œë¡œ ì¸í•œ ê°­ | ì‹¤ì  ë°œí‘œì¼ ìº˜ë¦°ë” |
| News Gap | ë‰´ìŠ¤/ì´ë²¤íŠ¸ë¡œ ì¸í•œ ê°­ | ë‰´ìŠ¤ ê±´ìˆ˜ > 0 |
| Market Gap | ì‹œì¥ ë™ë°˜ ìƒìŠ¹ ê°­ | SPY ê°­ê³¼ ìƒê´€ê´€ê³„ |
| Technical Gap | íŠ¹ë³„í•œ ì´‰ë§¤ ì—†ìŒ | ìœ„ ì¡°ê±´ ëª¨ë‘ í•´ë‹¹ ì—†ìŒ |

---

## 3. ë°ì´í„° ìš”êµ¬ì‚¬í•­

### 3.1 í•„ìˆ˜ ë°ì´í„° (Tier 1) - Phase 1

#### ê°€ê²© ë°ì´í„° (OHLCV)
```sql
-- í•„ìš” ì»¬ëŸ¼
symbol          -- ì¢…ëª© í‹°ì»¤
date            -- ê±°ë˜ì¼
open            -- ì‹œê°€
high            -- ê³ ê°€
low             -- ì €ê°€
close           -- ì¢…ê°€
adj_close       -- ìˆ˜ì • ì¢…ê°€
volume          -- ê±°ë˜ëŸ‰
```

#### ì‹¤ì  ë°ì´í„°
```sql
earnings_date           -- ì‹¤ì  ë°œí‘œì¼
eps_actual              -- ì‹¤ì œ EPS
eps_estimate            -- ì˜ˆìƒ EPS
earnings_surprise_pct   -- ì„œí”„ë¼ì´ì¦ˆ (%)
revenue_actual          -- ì‹¤ì œ ë§¤ì¶œ
revenue_estimate        -- ì˜ˆìƒ ë§¤ì¶œ
```

#### ë‰´ìŠ¤/ì„¼í‹°ë¨¼íŠ¸ ë°ì´í„°
```sql
news_datetime       -- ë‰´ìŠ¤ ë°œí–‰ ì‹œê°„
headline            -- í—¤ë“œë¼ì¸
sentiment_score     -- ì„¼í‹°ë¨¼íŠ¸ ìŠ¤ì½”ì–´ (-1 ~ 1)
relevance_score     -- ê´€ë ¨ì„± ì ìˆ˜
```

#### ì¢…ëª© ë©”íƒ€ ì •ë³´
```sql
symbol              -- í‹°ì»¤
exchange            -- ê±°ë˜ì†Œ
sector              -- ì„¹í„°
industry            -- ì‚°ì—…
market_cap          -- ì‹œê°€ì´ì•¡
status              -- ìƒì¥/ìƒì¥íì§€ ì—¬ë¶€
delist_date         -- ìƒì¥íì§€ì¼ (í•´ë‹¹ ì‹œ)
```

### 3.2 ë³´ì¡° ë°ì´í„° (Tier 2) - ê³ ë„í™” ë‹¨ê³„

#### í”„ë¦¬ë§ˆì¼“ ë°ì´í„° â­ ê³ ë„í™”
```sql
premarket_open      -- í”„ë¦¬ë§ˆì¼“ ì‹œê°€
premarket_high      -- í”„ë¦¬ë§ˆì¼“ ê³ ê°€
premarket_low       -- í”„ë¦¬ë§ˆì¼“ ì €ê°€
premarket_close     -- í”„ë¦¬ë§ˆì¼“ ì¢…ê°€
premarket_volume    -- í”„ë¦¬ë§ˆì¼“ ê±°ë˜ëŸ‰
```

#### ì• ë„ë¦¬ìŠ¤íŠ¸ ë°ì´í„°
```sql
rating_date         -- ë ˆì´íŒ… ë‚ ì§œ
rating_current      -- í˜„ì¬ ë ˆì´íŒ…
rating_prior        -- ì´ì „ ë ˆì´íŒ…
target_price        -- ëª©í‘œê°€
target_price_prior  -- ì´ì „ ëª©í‘œê°€
```

#### ì‹œì¥ ì»¨í…ìŠ¤íŠ¸
```sql
-- ë³„ë„ ìˆ˜ì§‘ í•„ìš”
spy_open, spy_close     -- S&P 500 ETF
qqq_open, qqq_close     -- NASDAQ 100 ETF
vix_close               -- VIX ì§€ìˆ˜
sector_etf_data         -- ì„¹í„°ë³„ ETF
```

#### ì¢…ëª© ë©”íƒ€ ì •ë³´
```sql
symbol              -- í‹°ì»¤
exchange            -- ê±°ë˜ì†Œ
sector              -- ì„¹í„°
industry            -- ì‚°ì—…
market_cap          -- ì‹œê°€ì´ì•¡
```

---

## 4. Feature Engineering

### 4.1 ê°€ê²© ê¸°ë°˜ Features
```python
features_price = {
    # ê°­ ê´€ë ¨
    "gap_pct": "(open - prev_close) / prev_close * 100",
    "gap_size_category": "small/medium/large (1-2%, 2-5%, 5%+)",
    
    # ì „ì¼ íŒ¨í„´
    "prev_return": "(prev_close - prev_open) / prev_open * 100",
    "prev_range_pct": "(prev_high - prev_low) / prev_close * 100",
    "prev_upper_shadow": "(prev_high - max(prev_open, prev_close)) / prev_close",
    "prev_lower_shadow": "(min(prev_open, prev_close) - prev_low) / prev_close",
    
    # ê±°ë˜ëŸ‰
    "volume_ratio": "prev_volume / avg_volume_20d",
}

# â­ ê³ ë„í™” ë‹¨ê³„ì—ì„œ ì¶”ê°€
features_price_advanced = {
    "premarket_volume_ratio": "premarket_volume / avg_volume_20d",
    "premarket_change": "(premarket_close - prev_close) / prev_close * 100",
    "premarket_range": "(premarket_high - premarket_low) / prev_close * 100",
}
```

### 4.2 ê¸°ìˆ ì  ì§€í‘œ Features
```python
features_technical = {
    # ì´ë™í‰ê· 
    "above_ma5": "prev_close > MA_5",
    "above_ma20": "prev_close > MA_20",
    "above_ma50": "prev_close > MA_50",
    "ma5_ma20_cross": "MA_5 > MA_20",
    
    # ëª¨ë©˜í…€
    "rsi_14": "RSI 14ì¼",
    "rsi_category": "oversold(<30) / neutral / overbought(>70)",
    
    # ë³€ë™ì„±
    "atr_14": "ATR 14ì¼",
    "atr_ratio": "gap_size / ATR_14",
    "bollinger_position": "(prev_close - BB_lower) / (BB_upper - BB_lower)",
    
    # ì¶”ì„¸
    "return_5d": "5ì¼ ìˆ˜ìµë¥ ",
    "return_20d": "20ì¼ ìˆ˜ìµë¥ ",
    "consecutive_up_days": "ì—°ì† ìƒìŠ¹ì¼ ìˆ˜",
}
```

### 4.3 ì´ë²¤íŠ¸/ë‰´ìŠ¤ Features
```python
features_event = {
    # ì‹¤ì 
    "is_earnings_day": "ë‹¹ì¼ ì‹¤ì  ë°œí‘œ ì—¬ë¶€ (0/1)",
    "is_earnings_window": "ì‹¤ì  ë°œí‘œ Â±2ì¼ ì´ë‚´ (0/1)",
    "earnings_surprise_pct": "EPS ì„œí”„ë¼ì´ì¦ˆ (%)",
    "earnings_surprise_category": "beat / meet / miss",
    
    # ë‰´ìŠ¤
    "news_count_24h": "24ì‹œê°„ ë‚´ ë‰´ìŠ¤ ê±´ìˆ˜",
    "news_sentiment_avg": "í‰ê·  ì„¼í‹°ë¨¼íŠ¸ ìŠ¤ì½”ì–´",
    "news_sentiment_max": "ìµœëŒ€ ì„¼í‹°ë¨¼íŠ¸ ìŠ¤ì½”ì–´",
    "has_positive_news": "ê¸ì • ë‰´ìŠ¤ ì¡´ì¬ ì—¬ë¶€",
    
    # ì• ë„ë¦¬ìŠ¤íŠ¸
    "rating_change": "ë ˆì´íŒ… ë³€ê²½ (upgrade:1, none:0, downgrade:-1)",
    "target_price_change_pct": "ëª©í‘œê°€ ë³€ê²½ë¥ ",
}
```

### 4.4 ì‹œì¥ ì»¨í…ìŠ¤íŠ¸ Features
```python
features_market = {
    # ì‹œì¥ ë°©í–¥
    "spy_gap_pct": "SPY ê°­ (%)",
    "qqq_gap_pct": "QQQ ê°­ (%)",
    "market_gap_diff": "ì¢…ëª© ê°­ - SPY ê°­ (ìƒëŒ€ ê°•ë„)",
    
    # ë³€ë™ì„± í™˜ê²½
    "vix_level": "VIX ìˆ˜ì¤€",
    "vix_category": "low(<15) / normal / high(>25)",
    "vix_change": "VIX ì „ì¼ ëŒ€ë¹„ ë³€í™”",
    
    # ì„¹í„°
    "sector_gap_pct": "ì„¹í„° ETF ê°­ (%)",
    "sector_relative_gap": "ì¢…ëª© ê°­ - ì„¹í„° ê°­",
}
```

### 4.5 ì‹œê°„ Features
```python
features_time = {
    "day_of_week": "ìš”ì¼ (0-4)",
    "month": "ì›” (1-12)",
    "is_month_start": "ì›”ì´ˆ ì—¬ë¶€ (ì²« 3ê±°ë˜ì¼)",
    "is_month_end": "ì›”ë§ ì—¬ë¶€ (ë§ˆì§€ë§‰ 3ê±°ë˜ì¼)",
    "is_quarter_end": "ë¶„ê¸°ë§ ì—¬ë¶€",
    "days_since_earnings": "ì‹¤ì  ë°œí‘œ í›„ ê²½ê³¼ì¼",
}
```

---

## 5. ë°ì´í„° í•„í„°ë§ ê¸°ì¤€

### 5.1 ì¢…ëª© í•„í„°
```python
filters_symbol = {
    "min_price": 5.0,           # $5 ì´ìƒ (í˜ë‹ˆìŠ¤íƒ ì œì™¸)
    "min_market_cap": 500e6,    # $500M ì´ìƒ
    "min_avg_volume": 100000,   # ì¼í‰ê·  ê±°ë˜ëŸ‰ 10ë§Œì£¼ ì´ìƒ
    "exchanges": ["NYSE", "NASDAQ", "AMEX"],
    "include_delisted": True,   # âœ… ìƒì¥íì§€ ì¢…ëª© í¬í•¨ (ìƒì¡´ì í¸í–¥ ì œê±°)
}
```

### 5.2 ê°­ í•„í„°
```python
filters_gap = {
    # ë°ì´í„° ìˆ˜ì§‘ ë‹¨ê³„
    "collection_min_gap_pct": 0.0,   # 0% ì´ˆê³¼ (ì‹œê°€ > ì „ì¼ ì¢…ê°€) ëª¨ë‘ ìˆ˜ì§‘
    
    # ëª¨ë¸ í•™ìŠµ ë‹¨ê³„ (ì‹¤í—˜ìš©)
    "training_gap_thresholds": [1.0, 2.0, 3.0, 5.0],  # ë‹¤ì–‘í•œ ê¸°ì¤€ ì‹¤í—˜
    
    # ê³µí†µ
    "max_gap_pct": 50.0,        # ìµœëŒ€ 50% ê°­ (ê·¹ë‹¨ê°’ ì œì™¸)
}
```

### 5.3 ë°ì´í„° í’ˆì§ˆ í•„í„°
```python
filters_quality = {
    "exclude_first_trading_day": True,   # IPO ì²«ë‚  ì œì™¸
    "exclude_halt_resume": True,         # ê±°ë˜ì •ì§€ í›„ ì¬ê°œì¼ ì œì™¸
    "require_premarket_data": False,     # í”„ë¦¬ë§ˆì¼“ ë°ì´í„° ë¶ˆí•„ìš” (ê³ ë„í™”ì—ì„œ ì‚¬ìš©)
    "handle_delisted": "include",        # ìƒì¥íì§€ ì¢…ëª© ì²˜ë¦¬: í¬í•¨
}
```

### 5.4 ìƒì¥íì§€ ì¢…ëª© ì²˜ë¦¬
```python
# ìƒì¥íì§€ ì¢…ëª© í¬í•¨ ì´ìœ :
# - ìƒì¡´ì í¸í–¥(Survivorship Bias) ì œê±°
# - ì‹¤íŒ¨í•œ ì¢…ëª©ì˜ ê°­ íŒ¨í„´ë„ í•™ìŠµì— í¬í•¨
# - ë³´ë‹¤ í˜„ì‹¤ì ì¸ ëª¨ë¸ ì„±ëŠ¥ í‰ê°€

# ì£¼ì˜ì‚¬í•­:
# - ìƒì¥íì§€ ì „ ë§ˆì§€ë§‰ ê±°ë˜ì¼ ë°ì´í„° í’ˆì§ˆ í™•ì¸
# - ê±°ë˜ì •ì§€ ê¸°ê°„ ì²˜ë¦¬ í•„ìš”
```

---

## 6. ëª¨ë¸ë§ ì „ëµ

### 6.1 ë¬¸ì œ ì •ì˜ - í•˜ì´ë¸Œë¦¬ë“œ ì ‘ê·¼ë²•

#### ìµœì¢… ì¶œë ¥ ëª©í‘œ
```
ì…ë ¥: ê°­ ìƒìŠ¹ ì¢…ëª© ì •ë³´
ì¶œë ¥:
  - ìƒìŠ¹ í™•ë¥ : 72%
  - ìƒìŠ¹ ì‹œ ì˜ˆìƒ ìˆ˜ìµë¥ : +2.5%
  - í•˜ë½ ì‹œ ì˜ˆìƒ ì†ì‹¤ë¥ : -1.8%
  - ê¸°ëŒ€ ìˆ˜ìµë¥ : +1.3%
```

#### 3ê°œ ëª¨ë¸ êµ¬ì„±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    í•˜ì´ë¸Œë¦¬ë“œ ëª¨ë¸ êµ¬ì¡°                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  [ì…ë ¥: ê°­ ìƒìŠ¹ ì¢…ëª© Features]                               â”‚
â”‚              â”‚                                              â”‚
â”‚              â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚  Model 1: ë¶„ë¥˜ ëª¨ë¸    â”‚ â†’ ìƒìŠ¹ í™•ë¥  P(up)                â”‚
â”‚  â”‚  (Classification)     â”‚                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚              â”‚                                              â”‚
â”‚              â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚  Model 2: íšŒê·€ ëª¨ë¸    â”‚ â†’ ìƒìŠ¹ ì‹œ ì˜ˆìƒ ìˆ˜ìµë¥  E[r|up]    â”‚
â”‚  â”‚  (ìƒìŠ¹ ì¼€ì´ìŠ¤ë§Œ í•™ìŠµ)   â”‚                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚              â”‚                                              â”‚
â”‚              â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚  Model 3: íšŒê·€ ëª¨ë¸    â”‚ â†’ í•˜ë½ ì‹œ ì˜ˆìƒ ì†ì‹¤ë¥  E[r|down]  â”‚
â”‚  â”‚  (í•˜ë½ ì¼€ì´ìŠ¤ë§Œ í•™ìŠµ)   â”‚                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚              â”‚                                              â”‚
â”‚              â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚      ìµœì¢… ê³„ì‚°         â”‚                                  â”‚
â”‚  â”‚  ê¸°ëŒ€ ìˆ˜ìµë¥  =         â”‚                                  â”‚
â”‚  â”‚  P(up) Ã— E[r|up] +    â”‚                                  â”‚
â”‚  â”‚  P(down) Ã— E[r|down]  â”‚                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ëª¨ë¸ë³„ ìƒì„¸

| ëª¨ë¸ | íƒ€ì… | í•™ìŠµ ë°ì´í„° | íƒ€ê²Ÿ | ì¶œë ¥ |
|------|------|-------------|------|------|
| Model 1 | ë¶„ë¥˜ | ì „ì²´ ê°­ ìƒìŠ¹ ì¼€ì´ìŠ¤ | ìƒìŠ¹(1)/í•˜ë½(0) | ìƒìŠ¹ í™•ë¥  (0~1) |
| Model 2 | íšŒê·€ | ìƒìŠ¹í•œ ì¼€ì´ìŠ¤ë§Œ | ìˆ˜ìµë¥  (%) | ìƒìŠ¹ ì‹œ ì˜ˆìƒ ìˆ˜ìµë¥  |
| Model 3 | íšŒê·€ | í•˜ë½í•œ ì¼€ì´ìŠ¤ë§Œ | ìˆ˜ìµë¥  (%) | í•˜ë½ ì‹œ ì˜ˆìƒ ì†ì‹¤ë¥  |

#### íƒ€ê²Ÿ ë³€ìˆ˜ ì •ì˜
```python
# ê³µí†µ
intraday_return = (close - open) / open * 100  # ë‹¹ì¼ ìˆ˜ìµë¥  (%)

# Model 1: ë¶„ë¥˜ íƒ€ê²Ÿ
target_direction = 1 if intraday_return > 0 else 0

# Model 2: ìƒìŠ¹ ì¼€ì´ìŠ¤ ìˆ˜ìµë¥  (ì–‘ìˆ˜)
target_up_return = intraday_return  # where intraday_return > 0

# Model 3: í•˜ë½ ì¼€ì´ìŠ¤ ìˆ˜ìµë¥  (ìŒìˆ˜)
target_down_return = intraday_return  # where intraday_return <= 0
```

#### ìµœì¢… ì¶œë ¥ ê³„ì‚°
```python
def predict(features):
    # ê° ëª¨ë¸ ì˜ˆì¸¡
    prob_up = model_classifier.predict_proba(features)[1]  # ìƒìŠ¹ í™•ë¥ 
    return_if_up = model_regressor_up.predict(features)    # ìƒìŠ¹ ì‹œ ìˆ˜ìµë¥ 
    return_if_down = model_regressor_down.predict(features) # í•˜ë½ ì‹œ ì†ì‹¤ë¥ 
    
    # ê¸°ëŒ€ ìˆ˜ìµë¥  ê³„ì‚°
    prob_down = 1 - prob_up
    expected_return = (prob_up * return_if_up) + (prob_down * return_if_down)
    
    return {
        "up_probability": prob_up,
        "expected_return_if_up": return_if_up,
        "expected_return_if_down": return_if_down,
        "expected_return": expected_return,
    }
```

### 6.2 ë°ì´í„° ë¶„í• 
```python
# ì‹œê³„ì—´ íŠ¹ì„± ê³ ë ¤ - ë¯¸ë˜ ë°ì´í„° ëˆ„ì¶œ ë°©ì§€
train_period = "2005-01-01 ~ 2019-12-31"  # 15ë…„
valid_period = "2020-01-01 ~ 2021-12-31"  # 2ë…„
test_period  = "2022-01-01 ~ 2024-12-31"  # 3ë…„

# ë˜ëŠ” Rolling Window ë°©ì‹
# í•™ìŠµ: ê³¼ê±° 5ë…„, ê²€ì¦: ë‹¤ìŒ 1ë…„, ë°˜ë³µ
```

### 6.3 ëª¨ë¸ í›„ë³´

#### Model 1: ë¶„ë¥˜ ëª¨ë¸ (ìƒìŠ¹ í™•ë¥ )
```python
classifiers = {
    "baseline": "Logistic Regression",
    "tree_based": ["Random Forest", "XGBoost", "LightGBM", "CatBoost"],
    "neural": ["MLP", "TabNet"],  # ì„ íƒì 
}
# í•µì‹¬: predict_proba()ë¡œ í™•ë¥  ì¶œë ¥ í•„ìš”
# ìº˜ë¦¬ë¸Œë ˆì´ì…˜ í•„ìˆ˜ (Platt Scaling, Isotonic Regression)
```

#### Model 2 & 3: íšŒê·€ ëª¨ë¸ (ìˆ˜ìµë¥  ì˜ˆì¸¡)
```python
regressors = {
    "baseline": "Linear Regression, Ridge, Lasso",
    "tree_based": ["Random Forest Regressor", "XGBoost Regressor", "LightGBM Regressor"],
    "quantile": "Quantile Regression",  # ë²”ìœ„ ì˜ˆì¸¡ ì‹œ ìœ ìš©
}
# í•µì‹¬: ì˜ˆì¸¡ ì‹ ë¢°êµ¬ê°„ ì œê³µ ê°€ëŠ¥í•˜ë©´ ì¢‹ìŒ
```

#### ê³ ê¸‰ ì˜µì…˜: ë‹¨ì¼ ëª¨ë¸ ì ‘ê·¼
```python
# ëŒ€ì•ˆ 1: Multi-output ëª¨ë¸
# í•˜ë‚˜ì˜ ëª¨ë¸ì´ [ë°©í–¥, ìˆ˜ìµë¥ ] ë™ì‹œ ì˜ˆì¸¡

# ëŒ€ì•ˆ 2: Quantile Regression
# ìˆ˜ìµë¥ ì˜ 10%, 50%, 90% ë¶„ìœ„ìˆ˜ ì˜ˆì¸¡
# â†’ ìì—°ìŠ¤ëŸ½ê²Œ ë²”ìœ„ì™€ ë°©í–¥ ì •ë³´ ì œê³µ
```

### 6.4 í´ë˜ìŠ¤ ë¶ˆê· í˜• ì²˜ë¦¬
```python
# ê°­ ìƒìŠ¹ í›„ ìƒìŠ¹/í•˜ë½ ë¹„ìœ¨ í™•ì¸ í•„ìš”
# ì˜ˆìƒ: ì•½ 50:50 ë˜ëŠ” ì•½ê°„ì˜ ë¶ˆê· í˜•

imbalance_strategies = [
    "class_weight='balanced'",
    "SMOTE",
    "Undersampling",
    "Threshold ì¡°ì •",
]
```

### 6.5 EDA ê¸°ë°˜ ìµœì  ì„¤ì •ê°’ â­ (2025-01-08 ì‹¤í—˜ ê²°ê³¼)

#### ë°ì´í„° í†µê³„ (í•œêµ­ ì‹œì¥, 2006-2026)
```python
ì‹¤í—˜_ë°ì´í„° = {
    "ì´_ê°­_ìƒìŠ¹_ì´ë²¤íŠ¸": 153762,
    "ì¢…ëª©_ìˆ˜": 2250,
    "ê¸°ê°„": "2006-01-17 ~ 2026-01-07",

    # í´ë˜ìŠ¤ ë¶ˆê· í˜• (ì‹¬ê°!)
    "ìƒìŠ¹_ë¹„ìœ¨": "31.31%",  # 48,139ê±´
    "í•˜ë½_ë¹„ìœ¨": "68.69%",  # 105,623ê±´

    # ìˆ˜ìµë¥  í†µê³„
    "ì „ì²´_ìŠ¹ë¥ ": "31.31%",
    "ê¸°ëŒ€_ìˆ˜ìµë¥ ": "-1.67%",  # ìŒìˆ˜!
    "ìƒìŠ¹ì‹œ_í‰ê· ": "+5.84%",
    "í•˜ë½ì‹œ_í‰ê· ": "-5.09%",
}
```

#### Model 1: ë¶„ë¥˜ ëª¨ë¸ ìµœì  í•˜ì´í¼íŒŒë¼ë¯¸í„°
```python
# Random Forest (ë² ìŠ¤íŠ¸ ì„±ëŠ¥ í™•ì¸)
best_rf_params = {
    "n_estimators": 300,           # âœ… 100 â†’ 300 (ì„±ëŠ¥ í–¥ìƒ)
    "max_depth": 15,                # âœ… 10 â†’ 15 (ë” ë³µì¡í•œ íŒ¨í„´ í•™ìŠµ)
    "min_samples_split": 10,        # âœ… ê³¼ì í•© ë°©ì§€
    "class_weight": "balanced",     # âœ… í•„ìˆ˜! (í´ë˜ìŠ¤ ë¶ˆê· í˜• 31:69)
    "random_state": 42,
    "n_jobs": -1,
}

# ì„±ëŠ¥ (Test Set)
performance = {
    "train_accuracy": 0.841,  # ê³¼ì í•© ì—†ìŒ
    "test_accuracy": 0.653,

    # Threshold 0.5 (ê¸°ë³¸)
    "precision_05": 0.432,
    "recall_05": 0.405,
    "f1_score_05": 0.418,

    # Threshold 0.4 (ìµœì ) â­
    "precision_04": 0.347,
    "recall_04": 0.867,     # âœ… ìƒìŠ¹ì˜ 86.7% í¬ì°©!
    "f1_score_04": 0.496,   # âœ… ìµœê³  F1-Score
}
```

#### ìµœì  Threshold: 0.4 â­
```python
# Threshold ì¡°ì • ì‹¤í—˜ ê²°ê³¼ (0.2 ~ 0.7)
# F1-Scoreê°€ 0.4ì—ì„œ ìµœëŒ€ê°’ (0.496)

optimal_threshold = {
    "value": 0.4,
    "precision": 0.347,      # 3ë²ˆ ì¤‘ 1ë²ˆ ì„±ê³µ
    "recall": 0.867,          # ìƒìŠ¹ì˜ 86.7% í¬ì°© âœ…
    "f1_score": 0.496,        # ê· í˜• ìµœì 
    "predicted_positive": 16907,  # ì‹¤ì œ 6,765ê°œì˜ 2.5ë°°
}

# ì‹¤ì „ ì˜ë¯¸:
# - í•˜ë£¨ ê°­ ìƒìŠ¹ 100ê°œ ë°œìƒ ì‹œ
# - ëª¨ë¸ ì˜ˆì¸¡: 250ê°œ "ìƒìŠ¹" (ì˜¤íƒ ë§ìŒ)
# - ì‹¤ì œ í¬ì°©: 87ê°œ (87% Recall)
# - ì¶”ê°€ í•„í„°ë§ìœ¼ë¡œ ì˜¤íƒ ì œê±° í•„ìš”
```

#### Feature Importance (ìƒìœ„ 10ê°œ)
```python
feature_importance = {
    "market_gap_diff": 0.159,      # 15.9% - ê°€ì¥ ì¤‘ìš”! (ì‹œì¥ ëŒ€ë¹„ ê°­)
    "gap_pct": 0.100,               # 10.0% - ê°­ í¬ê¸°
    "prev_return": 0.079,           # 7.9% - ì „ì¼ ìˆ˜ìµë¥ 
    "atr_14": 0.068,                # 6.8% - ë³€ë™ì„±
    "return_5d": 0.067,             # 6.7% - 5ì¼ ì¶”ì„¸
    "atr_ratio": 0.065,             # 6.5% - ê°­/ë³€ë™ì„± ë¹„ìœ¨
    "rsi_14": 0.061,                # 6.1% - RSI
    "return_20d": 0.060,            # 6.0% - 20ì¼ ì¶”ì„¸
    "bollinger_position": 0.056,   # 5.6% - ë³¼ë¦°ì €ë°´ë“œ ìœ„ì¹˜
    "prev_upper_shadow": 0.051,    # 5.1% - ì „ì¼ ìœ—ê¼¬ë¦¬
}

# í•µì‹¬ ì¸ì‚¬ì´íŠ¸:
# 1. market_gap_diffê°€ ì••ë„ì ìœ¼ë¡œ ì¤‘ìš” (ì‹œì¥ ëŒ€ë¹„ ì–¼ë§ˆë‚˜ ê°•í•œê°€)
# 2. ê°­ í¬ê¸°(gap_pct)ëŠ” 2ìœ„
# 3. ê¸°ìˆ ì  ì§€í‘œ(RSI, Bollinger)ë³´ë‹¤ ê°€ê²©/ì¶”ì„¸ê°€ ë” ì¤‘ìš”
```

#### ì‹¤ì „ ì ìš© ì „ëµ
```python
# Step 1: ëª¨ë¸ ì˜ˆì¸¡ (Threshold 0.4)
y_proba = model.predict_proba(X)[:, 1]
y_pred = (y_proba >= 0.4).astype(int)

# Step 2: ì¶”ê°€ í•„í„°ë§ (ì˜¤íƒ ì œê±°)
# Precisionì„ 34% â†’ 50%+ í–¥ìƒ ëª©í‘œ
filtered_signals = predicted_up[
    (y_proba >= 0.4) &              # ê¸°ë³¸ threshold
    (y_proba >= 0.5) |              # í™•ë¥  ë†’ì€ ê²ƒ ìš°ì„ 
    (
        (market_gap_diff < 5) &     # ì‹œì¥ ëŒ€ë¹„ ë„ˆë¬´ í¬ì§€ ì•ŠìŒ
        (gap_pct < 10) &            # ê°­ 10% ë¯¸ë§Œ
        (volume_ratio > 1.5) &      # ê±°ë˜ëŸ‰ ì¶©ë¶„
        (rsi_14.between(30, 70))    # RSI ì¤‘ê°„ ë²”ìœ„
    )
]

# Step 3: í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„±
# - í™•ë¥  ìƒìœ„ 20ê°œ ì¢…ëª© ì„ íƒ
# - ë™ì¼ ê°€ì¤‘ ë˜ëŠ” í™•ë¥  ê°€ì¤‘ íˆ¬ì
# - ë¦¬ìŠ¤í¬ ê´€ë¦¬: 1ì¢…ëª©ë‹¹ 5% ì´í•˜
```

#### ì£¼ìš” ë°œê²¬ ì‚¬í•­
```
âœ… ì„±ê³µ ìš”ì¸:
1. class_weight='balanced' ì ìš©ìœ¼ë¡œ Recall 7% â†’ 87% í–¥ìƒ
2. Threshold 0.4 ì‚¬ìš©ìœ¼ë¡œ F1-Score ìµœëŒ€í™”
3. market_gap_diffê°€ ê°€ì¥ ì¤‘ìš”í•œ Feature

âš ï¸ ì£¼ì˜ ì‚¬í•­:
1. ìŠ¹ë¥  31.31%ë¡œ ë§¤ìš° ë‚®ìŒ (ê°€ì„¤ ë°˜ë°•)
2. ê¸°ëŒ€ ìˆ˜ìµë¥  -1.67% (ìŒìˆ˜)
3. Precision 34.7% (ì˜¤íƒ ë§ìŒ)
4. ì¶”ê°€ í•„í„°ë§ í•„ìˆ˜

ğŸ“ˆ ê°œì„  ë°©í–¥:
1. ì•™ìƒë¸” (XGBoost + LightGBM + RF)
2. ë‰´ìŠ¤/ì‹¤ì  ë°ì´í„° ì¶”ê°€
3. Precision í–¥ìƒì„ ìœ„í•œ í›„ì²˜ë¦¬ í•„í„°
4. ë°±í…ŒìŠ¤íŒ…ìœ¼ë¡œ ì‹¤ì œ ìˆ˜ìµë¥  ê²€ì¦
```

---

## 7. í‰ê°€ ì§€í‘œ

### 7.1 Model 1: ë¶„ë¥˜ ì„±ëŠ¥
```python
metrics_classification = {
    "accuracy": "ì „ì²´ ì •í™•ë„",
    "precision": "ì˜ˆì¸¡ ìƒìŠ¹ ì¤‘ ì‹¤ì œ ìƒìŠ¹ ë¹„ìœ¨",
    "recall": "ì‹¤ì œ ìƒìŠ¹ ì¤‘ ì˜ˆì¸¡ ìƒìŠ¹ ë¹„ìœ¨",
    "f1_score": "Precision-Recall ì¡°í™”í‰ê· ",
    "auc_roc": "ROC ê³¡ì„  ì•„ë˜ ë©´ì ",
    "auc_pr": "Precision-Recall ê³¡ì„  ì•„ë˜ ë©´ì ",
    "brier_score": "í™•ë¥  ì˜ˆì¸¡ ì •í™•ë„ (ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ)",
    "calibration_error": "ì˜ˆì¸¡ í™•ë¥  vs ì‹¤ì œ í™•ë¥  ì˜¤ì°¨",
}
```

### 7.2 Model 2 & 3: íšŒê·€ ì„±ëŠ¥
```python
metrics_regression = {
    "mae": "Mean Absolute Error (í‰ê·  ì ˆëŒ€ ì˜¤ì°¨)",
    "rmse": "Root Mean Squared Error",
    "mape": "Mean Absolute Percentage Error",
    "r2": "ê²°ì • ê³„ìˆ˜",
    "direction_accuracy": "ì˜ˆì¸¡ ë¶€í˜¸ì™€ ì‹¤ì œ ë¶€í˜¸ ì¼ì¹˜ìœ¨",
}
```

### 7.3 í†µí•© ì‹œìŠ¤í…œ ì„±ëŠ¥
```python
metrics_integrated = {
    "expected_return_mae": "ê¸°ëŒ€ ìˆ˜ìµë¥  ì˜ˆì¸¡ MAE",
    "expected_return_correlation": "ê¸°ëŒ€ ìˆ˜ìµë¥  vs ì‹¤ì œ ìˆ˜ìµë¥  ìƒê´€ê³„ìˆ˜",
    "ranking_quality": "ê¸°ëŒ€ ìˆ˜ìµë¥  ìˆœìœ„ì™€ ì‹¤ì œ ìˆœìœ„ ì¼ì¹˜ë„ (Spearman)",
}
```

### 7.4 íŠ¸ë ˆì´ë”© ì„±ëŠ¥ (ë°±í…ŒìŠ¤íŒ…)
```python
metrics_trading = {
    "win_rate": "ìŠ¹ë¥  (%)",
    "avg_return": "í‰ê·  ìˆ˜ìµë¥  (%)",
    "profit_factor": "ì´ì´ìµ / ì´ì†ì‹¤",
    "sharpe_ratio": "ìƒ¤í”„ ë¹„ìœ¨",
    "max_drawdown": "ìµœëŒ€ ë‚™í­ (%)",
    "total_return": "ëˆ„ì  ìˆ˜ìµë¥  (%)",
}
```

### 7.3 ì‹ ë¢°ë„ ê¸°ë°˜ í‰ê°€
```python
# ì˜ˆì¸¡ í™•ë¥ (confidence)ì— ë”°ë¥¸ ì„±ëŠ¥ ë¶„ì„
confidence_analysis = {
    "high_confidence": "í™•ë¥  > 0.7ì¸ ê²½ìš° ìŠ¹ë¥ ",
    "low_confidence": "í™•ë¥  0.5-0.6ì¸ ê²½ìš° ìŠ¹ë¥ ",
    "calibration": "ì˜ˆì¸¡ í™•ë¥ ê³¼ ì‹¤ì œ í™•ë¥ ì˜ ì¼ì¹˜ë„",
}
```

---

## 8. êµ¬í˜„ ë‹¨ê³„

### Phase 1: ë°ì´í„° íŒŒì´í”„ë¼ì¸ (Week 1-2)
```
1.1 DB ì—°ê²° ë° ìŠ¤í‚¤ë§ˆ í™•ì¸
1.2 OHLCV ë°ì´í„° ì¶”ì¶œ ì¿¼ë¦¬ ì‘ì„±
1.3 ì‹¤ì  ë°ì´í„° ì¶”ì¶œ ë° ë§¤í•‘
1.4 ë‰´ìŠ¤/ì„¼í‹°ë¨¼íŠ¸ ë°ì´í„° ì¶”ì¶œ
1.5 ë°ì´í„° ë³‘í•© ë° ì •í•©ì„± ê²€ì¦
1.6 ê°­ ìƒìŠ¹ ì´ë²¤íŠ¸ ì‹ë³„ ë° ë¼ë²¨ë§
```

### Phase 2: EDA ë° Feature Engineering (Week 2-3)
```
2.1 ê°­ ìƒìŠ¹ ê¸°ì´ˆ í†µê³„ ë¶„ì„
    - ì—°ë„ë³„/ì›”ë³„ ê°­ ë°œìƒ ë¹ˆë„
    - ê°­ í¬ê¸° ë¶„í¬
    - ê°­ ìœ í˜•ë³„ ë¶„í¬
    
2.2 íƒ€ê²Ÿ ë¶„í¬ ë¶„ì„
    - ì „ì²´ ê°­ ìƒìŠ¹ í›„ ìŠ¹ë¥ 
    - ê°­ í¬ê¸°ë³„ ìŠ¹ë¥ 
    - ê°­ ìœ í˜•ë³„ ìŠ¹ë¥ 
    
2.3 Feature ìƒì„± ë° ì„ íƒ
    - ìƒê´€ê´€ê³„ ë¶„ì„
    - Feature Importance ì˜ˆë¹„ ë¶„ì„
```

### Phase 3: ëª¨ë¸ ê°œë°œ (Week 3-4)
```
3.1 Model 1: ë¶„ë¥˜ ëª¨ë¸ (ìƒìŠ¹ í™•ë¥ )
    - ë² ì´ìŠ¤ë¼ì¸: Logistic Regression
    - Tree ê¸°ë°˜: XGBoost, LightGBM
    - í™•ë¥  ìº˜ë¦¬ë¸Œë ˆì´ì…˜
    
3.2 Model 2: ìƒìŠ¹ ì¼€ì´ìŠ¤ íšŒê·€ ëª¨ë¸
    - ìƒìŠ¹í•œ ì¼€ì´ìŠ¤ë§Œ í•„í„°ë§
    - ìˆ˜ìµë¥  ì˜ˆì¸¡ ëª¨ë¸ í•™ìŠµ
    
3.3 Model 3: í•˜ë½ ì¼€ì´ìŠ¤ íšŒê·€ ëª¨ë¸
    - í•˜ë½í•œ ì¼€ì´ìŠ¤ë§Œ í•„í„°ë§
    - ì†ì‹¤ë¥  ì˜ˆì¸¡ ëª¨ë¸ í•™ìŠµ
    
3.4 í†µí•© ì‹œìŠ¤í…œ êµ¬ì¶•
    - 3ê°œ ëª¨ë¸ íŒŒì´í”„ë¼ì¸ ì—°ê²°
    - ê¸°ëŒ€ ìˆ˜ìµë¥  ê³„ì‚° ë¡œì§
    
3.5 í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹
3.6 Feature Selection ë°˜ë³µ
```

### Phase 4: í‰ê°€ ë° ë°±í…ŒìŠ¤íŒ… (Week 4-5)
```
4.1 Hold-out í…ŒìŠ¤íŠ¸ì…‹ í‰ê°€
4.2 ì‹œê°„ë³„ ì„±ëŠ¥ ì•ˆì •ì„± ë¶„ì„
4.3 ë°±í…ŒìŠ¤íŒ… ì‹œë®¬ë ˆì´ì…˜
4.4 ë¦¬ìŠ¤í¬ ë¶„ì„
```

### Phase 5: ê³ ë„í™” (ì„ íƒ)
```
5.1 í”„ë¦¬ë§ˆì¼“ ë°ì´í„° ì¶”ê°€ â­
    - í”„ë¦¬ë§ˆì¼“ ê±°ë˜ëŸ‰, ë³€ë™ë¥  Feature ì¶”ê°€
    - ëª¨ë¸ ì¬í•™ìŠµ ë° ì„±ëŠ¥ ë¹„êµ
    
5.2 ê°­ ìœ í˜•ë³„ ê°œë³„ ëª¨ë¸
    - Earnings Gap ì „ìš© ëª¨ë¸
    - News Gap ì „ìš© ëª¨ë¸
    
5.3 í™•ë¥  ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ê³ ë„í™”
5.4 ì‹¤ì‹œê°„ ì˜ˆì¸¡ íŒŒì´í”„ë¼ì¸
5.5 ì• ë„ë¦¬ìŠ¤íŠ¸ ë°ì´í„° í†µí•©
```

---

## 9. ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
gap_prediction/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ config.yaml          # ì„¤ì • íŒŒì¼
â”‚   â””â”€â”€ features.yaml        # Feature ì •ì˜
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ raw/                 # DBì—ì„œ ì¶”ì¶œí•œ ì›ë³¸ ë°ì´í„°
â”‚   â”œâ”€â”€ processed/           # ì „ì²˜ë¦¬ëœ ë°ì´í„°
â”‚   â””â”€â”€ features/            # Feature ë°ì´í„°ì…‹
â”‚
â”œâ”€â”€ notebooks/
â”‚   â”œâ”€â”€ 01_data_exploration.ipynb
â”‚   â”œâ”€â”€ 02_eda.ipynb
â”‚   â”œâ”€â”€ 03_feature_engineering.ipynb
â”‚   â”œâ”€â”€ 04_modeling_classifier.ipynb    # Model 1: ë¶„ë¥˜
â”‚   â”œâ”€â”€ 05_modeling_regressor.ipynb     # Model 2 & 3: íšŒê·€
â”‚   â”œâ”€â”€ 06_model_integration.ipynb      # í†µí•© ì‹œìŠ¤í…œ
â”‚   â””â”€â”€ 07_backtesting.ipynb
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ db_connector.py      # DB ì—°ê²°
â”‚   â”‚   â”œâ”€â”€ data_loader.py       # ë°ì´í„° ë¡œë“œ
â”‚   â”‚   â””â”€â”€ preprocessor.py      # ì „ì²˜ë¦¬
â”‚   â”‚
â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â”œâ”€â”€ price_features.py    # ê°€ê²© ê¸°ë°˜ Feature
â”‚   â”‚   â”œâ”€â”€ technical_features.py # ê¸°ìˆ ì  ì§€í‘œ
â”‚   â”‚   â”œâ”€â”€ event_features.py    # ì´ë²¤íŠ¸/ë‰´ìŠ¤ Feature
â”‚   â”‚   â””â”€â”€ market_features.py   # ì‹œì¥ ì»¨í…ìŠ¤íŠ¸
â”‚   â”‚
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ classifier.py        # Model 1: ë°©í–¥ ë¶„ë¥˜
â”‚   â”‚   â”œâ”€â”€ regressor_up.py      # Model 2: ìƒìŠ¹ ìˆ˜ìµë¥ 
â”‚   â”‚   â”œâ”€â”€ regressor_down.py    # Model 3: í•˜ë½ ì†ì‹¤ë¥ 
â”‚   â”‚   â”œâ”€â”€ ensemble.py          # í†µí•© ì˜ˆì¸¡ ì‹œìŠ¤í…œ
â”‚   â”‚   â”œâ”€â”€ calibration.py       # í™•ë¥  ìº˜ë¦¬ë¸Œë ˆì´ì…˜
â”‚   â”‚   â””â”€â”€ trainer.py           # ê³µí†µ í•™ìŠµ ìœ í‹¸
â”‚   â”‚
â”‚   â”œâ”€â”€ prediction/
â”‚   â”‚   â”œâ”€â”€ predictor.py         # í†µí•© ì˜ˆì¸¡ê¸°
â”‚   â”‚   â””â”€â”€ output_formatter.py  # ì¶œë ¥ í¬ë§·íŒ…
â”‚   â”‚
â”‚   â”œâ”€â”€ evaluation/
â”‚   â”‚   â”œâ”€â”€ classifier_metrics.py
â”‚   â”‚   â”œâ”€â”€ regressor_metrics.py
â”‚   â”‚   â””â”€â”€ integrated_metrics.py
â”‚   â”‚
â”‚   â””â”€â”€ backtesting/
â”‚       â”œâ”€â”€ simulator.py         # ë°±í…ŒìŠ¤íŒ… ì‹œë®¬ë ˆì´í„°
â”‚       â””â”€â”€ metrics.py           # íŠ¸ë ˆì´ë”© ì§€í‘œ
â”‚
â”œâ”€â”€ models/                  # í•™ìŠµëœ ëª¨ë¸ ì €ì¥
â”‚   â”œâ”€â”€ classifier/
â”‚   â”œâ”€â”€ regressor_up/
â”‚   â””â”€â”€ regressor_down/
â”‚
â”œâ”€â”€ reports/                 # ë¶„ì„ ë¦¬í¬íŠ¸
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

---

## 10. ì£¼ìš” ë¦¬ìŠ¤í¬ ë° ê³ ë ¤ì‚¬í•­

### 10.1 ë°ì´í„° ê´€ë ¨
- **Look-ahead Bias**: ë¯¸ë˜ ë°ì´í„°ê°€ Featureì— í¬í•¨ë˜ì§€ ì•Šë„ë¡ ì£¼ì˜
- **Survivorship Bias**: âœ… ìƒì¥íì§€ ì¢…ëª© í¬í•¨ìœ¼ë¡œ í•´ê²°
- **ë°ì´í„° í’ˆì§ˆ**: ìˆ˜ì •ì£¼ê°€, ì£¼ì‹ë¶„í•  ë“± ë°˜ì˜ í™•ì¸
- **ìƒì¥íì§€ ì²˜ë¦¬**: ë§ˆì§€ë§‰ ê±°ë˜ì¼ ë°ì´í„° í’ˆì§ˆ, ê±°ë˜ì •ì§€ ê¸°ê°„ í™•ì¸

### 10.2 ëª¨ë¸ ê´€ë ¨
- **ê³¼ì í•©**: ì‹œê³„ì—´ êµì°¨ê²€ì¦ìœ¼ë¡œ ê²€ì¦
- **Regime Change**: ì‹œì¥ í™˜ê²½ ë³€í™”ì— ë”°ë¥¸ ì„±ëŠ¥ ì €í•˜ ê°€ëŠ¥
- **í´ë˜ìŠ¤ ë¶ˆê· í˜•**: ë¶ˆê· í˜• ì‹¬í•  ê²½ìš° ì²˜ë¦¬ í•„ìš”

### 10.3 ì‹¤ì „ ì ìš©
- **ìŠ¬ë¦¬í”¼ì§€**: ì‹¤ì œ ì§„ì…ê°€ì™€ ì‹œê°€ ì°¨ì´
- **ìœ ë™ì„±**: ê±°ë˜ëŸ‰ ë¶€ì¡± ì‹œ ì§„ì… ì–´ë ¤ì›€
- **ê±°ë˜ë¹„ìš©**: ìˆ˜ìˆ˜ë£Œ ë°˜ì˜í•œ ì‹¤ì§ˆ ìˆ˜ìµë¥ 

---

## 11. ì„±ê³µ ê¸°ì¤€

### Model 1 (ë¶„ë¥˜) ìµœì†Œ ëª©í‘œ
```
- í…ŒìŠ¤íŠ¸ì…‹ ì •í™•ë„: > 55%
- AUC-ROC: > 0.58
- Brier Score: < 0.24
- ìº˜ë¦¬ë¸Œë ˆì´ì…˜: ì˜ˆì¸¡ í™•ë¥ ê³¼ ì‹¤ì œ í™•ë¥  ì˜¤ì°¨ < 5%
```

### Model 2 & 3 (íšŒê·€) ìµœì†Œ ëª©í‘œ
```
- ìˆ˜ìµë¥  ì˜ˆì¸¡ MAE: < 2.0%
- ë°©í–¥ ì¼ì¹˜ìœ¨: > 60%
- RÂ²: > 0.05 (ì£¼ê°€ ì˜ˆì¸¡ì€ ë§¤ìš° ì–´ë ¤ìš°ë¯€ë¡œ ë‚®ì€ ê¸°ì¤€)
```

### í†µí•© ì‹œìŠ¤í…œ ëª©í‘œ
```
- ê¸°ëŒ€ ìˆ˜ìµë¥  ìƒê´€ê³„ìˆ˜: > 0.15
- ìƒìœ„ 20% ê¸°ëŒ€ ìˆ˜ìµë¥  ì¢…ëª© ì‹¤ì œ í‰ê·  ìˆ˜ìµë¥ : > 1.5%
- í•˜ìœ„ 20% ê¸°ëŒ€ ìˆ˜ìµë¥  ì¢…ëª© ì‹¤ì œ í‰ê·  ìˆ˜ìµë¥ : < 0.5%
```

### íŠ¸ë ˆì´ë”© ëª©í‘œ
```
- ê¸°ëŒ€ ìˆ˜ìµë¥  > 1% ì¢…ëª©ë§Œ ë§¤ë§¤ ì‹œ ìŠ¹ë¥ : > 60%
- ì—°ê°„ ìƒ¤í”„ë¹„ìœ¨: > 1.0
- ë°±í…ŒìŠ¤íŒ… ëˆ„ì  ìˆ˜ìµë¥ : > Buy & Hold
```

---

## 12. ì°¸ê³ ì‚¬í•­

### ë³€ê²½ ì´ë ¥
| ë‚ ì§œ | ë²„ì „ | ë³€ê²½ ë‚´ìš© |
|------|------|-----------|
| 2025-01-06 | 0.1 | ì´ˆì•ˆ ì‘ì„± |
| 2025-01-06 | 0.2 | í•˜ì´ë¸Œë¦¬ë“œ ëª¨ë¸ êµ¬ì¡°ë¡œ ë³€ê²½ (ë¶„ë¥˜ + íšŒê·€) |
| 2025-01-06 | 0.3 | ê°­ ê¸°ì¤€ 0% ì´ˆê³¼ë¡œ ë³€ê²½, ìƒì¥íì§€ í¬í•¨, í”„ë¦¬ë§ˆì¼“ ê³ ë„í™”ë¡œ ì´ë™ |

### ë¯¸ê²°ì • ì‚¬í•­
- [x] ~~ê°­ ìƒìŠ¹ ê¸°ì¤€~~ â†’ 0% ì´ˆê³¼ë¡œ ìˆ˜ì§‘, í•™ìŠµ ì‹œ ì‹¤í—˜
- [x] ~~ìƒì¥íì§€ ì¢…ëª© í¬í•¨ ì—¬ë¶€~~ â†’ í¬í•¨ (ìƒì¡´ì í¸í–¥ ì œê±°)
- [x] ~~í”„ë¦¬ë§ˆì¼“ ë°ì´í„° í•„ìˆ˜ ì—¬ë¶€~~ â†’ Phase 1 ì œì™¸, ê³ ë„í™”ì—ì„œ ì¶”ê°€
- [ ] êµ¬ì²´ì ì¸ DB í…Œì´ë¸”/ì»¬ëŸ¼ëª…

---

*ì´ ë¬¸ì„œëŠ” í”„ë¡œì íŠ¸ ì§„í–‰ì— ë”°ë¼ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.*
